FROM cosmtrek/air
COPY ./src/server/ /usr/src/app
WORKDIR /usr/src/app

RUN go mod tidy

ENV LISTEN_PORT=8081
ENV REDIRECT_PORT=8080

EXPOSE 8081:$LISTEN_PORT

CMD air --build.cmd "go build -o main.o main.go" --build.bin "./main.o"
